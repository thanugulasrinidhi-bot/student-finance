<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartFinance - AI Student Finance Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-shadow { box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .pulse-animation { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                        <span class="text-2xl">üß†</span>
                    </div>
                    <h1 class="text-2xl font-bold">SmartFinance AI</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm opacity-90">Balance: $<span id="totalBalance">2,450.00</span></span>
                    <div class="w-8 h-8 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                        <span class="text-sm">üë§</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-6 py-8">
        <!-- Quick Stats Dashboard -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-xl p-6 card-shadow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">This Month</p>
                        <p class="text-2xl font-bold text-gray-800">$<span id="monthlySpent">847.32</span></p>
                    </div>
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <span class="text-2xl">üí≥</span>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="flex items-center text-sm">
                        <span class="text-red-500">‚Üó 12%</span>
                        <span class="text-gray-500 ml-2">vs last month</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl p-6 card-shadow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Budget Left</p>
                        <p class="text-2xl font-bold text-green-600">$<span id="budgetLeft">352.68</span></p>
                    </div>
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <span class="text-2xl">üéØ</span>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-green-500 h-2 rounded-full" style="width: 71%"></div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl p-6 card-shadow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">Savings Goal</p>
                        <p class="text-2xl font-bold text-purple-600">$<span id="savingsProgress">1,250</span></p>
                    </div>
                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                        <span class="text-2xl">üí∞</span>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="flex items-center text-sm">
                        <span class="text-green-500">83%</span>
                        <span class="text-gray-500 ml-2">of $1,500 goal</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl p-6 card-shadow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-500 text-sm">AI Prediction</p>
                        <p class="text-2xl font-bold text-orange-600">$<span id="predictedSpend">1,120</span></p>
                    </div>
                    <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                        <span class="text-2xl">üîÆ</span>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="flex items-center text-sm">
                        <span class="text-orange-500">Next month</span>
                        <span class="pulse-animation ml-2">ü§ñ</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Add Expense Form -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">‚ûï</span>
                        Add New Expense
                    </h2>
                    <form id="expenseForm" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <input type="number" id="expenseAmount" placeholder="Amount ($)" 
                               class="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        <input type="text" id="expenseDescription" placeholder="Description" 
                               class="border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required>
                        <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white rounded-lg px-6 py-2 font-medium transition-colors">
                            Add Expense
                        </button>
                    </form>
                    <div id="aiCategoryResult" class="mt-4 p-3 bg-blue-50 rounded-lg hidden">
                        <p class="text-sm text-blue-800">
                            <span class="font-medium">ü§ñ AI Categorized as:</span> 
                            <span id="aiCategory" class="font-semibold"></span>
                        </p>
                    </div>
                </div>

                <!-- Spending Analytics Chart -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">üìä</span>
                        Spending Analytics & Predictions
                    </h2>
                    <canvas id="spendingChart" width="400" height="200"></canvas>
                </div>

                <!-- Recent Transactions -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">üìù</span>
                        Recent Transactions
                    </h2>
                    <div id="transactionsList" class="space-y-3">
                        <!-- Transactions will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="space-y-8">
                <!-- Budget Alerts -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">üö®</span>
                        Smart Alerts
                    </h2>
                    <div id="alertsList" class="space-y-3">
                        <!-- Alerts will be populated here -->
                    </div>
                </div>

                <!-- Category Breakdown -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">üè∑Ô∏è</span>
                        Category Breakdown
                    </h2>
                    <canvas id="categoryChart" width="300" height="300"></canvas>
                </div>

                <!-- Financial Goals -->
                <div class="bg-white rounded-xl p-6 card-shadow">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">üéØ</span>
                        Financial Goals
                    </h2>
                    <div class="space-y-4">
                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Emergency Fund</span>
                                <span class="text-sm text-gray-500">$1,250 / $1,500</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-green-500 h-2 rounded-full" style="width: 83%"></div>
                            </div>
                        </div>
                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="font-medium">Laptop Fund</span>
                                <span class="text-sm text-gray-500">$450 / $800</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-500 h-2 rounded-full" style="width: 56%"></div>
                            </div>
                        </div>
                    </div>
                    <button id="addGoalBtn" class="w-full mt-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg py-2 font-medium transition-colors">
                        Add New Goal
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Goal Modal -->
    <div id="goalModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-lg font-semibold mb-4">Add Financial Goal</h3>
            <form id="goalForm" class="space-y-4">
                <input type="text" id="goalName" placeholder="Goal name" 
                       class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                <input type="number" id="goalAmount" placeholder="Target amount ($)" 
                       class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent" required>
                <div class="flex space-x-3">
                    <button type="button" id="cancelGoal" class="flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg py-2 font-medium transition-colors">
                        Cancel
                    </button>
                    <button type="submit" class="flex-1 bg-purple-600 hover:bg-purple-700 text-white rounded-lg py-2 font-medium transition-colors">
                        Add Goal
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // AI Finance Manager Logic
        class AIFinanceManager {
            constructor() {
                this.expenses = [
                    { id: 1, amount: 45.50, description: 'Grocery shopping', category: 'Food', date: new Date('2024-01-15') },
                    { id: 2, amount: 120.00, description: 'Textbooks', category: 'Education', date: new Date('2024-01-14') },
                    { id: 3, amount: 25.99, description: 'Netflix subscription', category: 'Entertainment', date: new Date('2024-01-13') },
                    { id: 4, amount: 89.75, description: 'Gas station', category: 'Transportation', date: new Date('2024-01-12') },
                    { id: 5, amount: 15.50, description: 'Coffee shop', category: 'Food', date: new Date('2024-01-11') }
                ];
                this.categories = ['Food', 'Transportation', 'Entertainment', 'Education', 'Shopping', 'Healthcare', 'Utilities'];
                this.budget = 1200;
                this.goals = [
                    { name: 'Emergency Fund', current: 1250, target: 1500 },
                    { name: 'Laptop Fund', current: 450, target: 800 }
                ];
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updateDashboard();
                this.renderTransactions();
                this.renderAlerts();
                this.createCharts();
            }

            setupEventListeners() {
                document.getElementById('expenseForm').addEventListener('submit', (e) => this.addExpense(e));
                document.getElementById('addGoalBtn').addEventListener('click', () => this.showGoalModal());
                document.getElementById('goalForm').addEventListener('submit', (e) => this.addGoal(e));
                document.getElementById('cancelGoal').addEventListener('click', () => this.hideGoalModal());
            }

            // AI-powered expense categorization
            categorizeExpense(description) {
                const keywords = {
                    'Food': ['grocery', 'restaurant', 'coffee', 'pizza', 'food', 'lunch', 'dinner', 'breakfast', 'snack'],
                    'Transportation': ['gas', 'uber', 'taxi', 'bus', 'train', 'parking', 'fuel'],
                    'Entertainment': ['netflix', 'movie', 'game', 'concert', 'spotify', 'entertainment'],
                    'Education': ['book', 'tuition', 'course', 'school', 'university', 'textbook', 'supplies'],
                    'Shopping': ['amazon', 'clothes', 'shopping', 'store', 'mall'],
                    'Healthcare': ['doctor', 'pharmacy', 'medicine', 'hospital', 'health'],
                    'Utilities': ['electric', 'water', 'internet', 'phone', 'rent']
                };

                const desc = description.toLowerCase();
                for (const [category, words] of Object.entries(keywords)) {
                    if (words.some(word => desc.includes(word))) {
                        return category;
                    }
                }
                return 'Other';
            }

            // Predictive spending analysis
            predictNextMonthSpending() {
                const recentExpenses = this.expenses.slice(-10);
                const avgDaily = recentExpenses.reduce((sum, exp) => sum + exp.amount, 0) / 10;
                const trend = 1.05; // 5% increase trend
                return Math.round(avgDaily * 30 * trend);
            }

            addExpense(e) {
                e.preventDefault();
                const amount = parseFloat(document.getElementById('expenseAmount').value);
                const description = document.getElementById('expenseDescription').value;
                
                const category = this.categorizeExpense(description);
                const newExpense = {
                    id: Date.now(),
                    amount,
                    description,
                    category,
                    date: new Date()
                };

                this.expenses.unshift(newExpense);
                
                // Show AI categorization result
                document.getElementById('aiCategory').textContent = category;
                document.getElementById('aiCategoryResult').classList.remove('hidden');
                
                setTimeout(() => {
                    document.getElementById('aiCategoryResult').classList.add('hidden');
                }, 3000);

                document.getElementById('expenseForm').reset();
                this.updateDashboard();
                this.renderTransactions();
                this.renderAlerts();
                this.updateCharts();
            }

            updateDashboard() {
                const thisMonth = this.expenses.filter(exp => {
                    const expDate = new Date(exp.date);
                    const now = new Date();
                    return expDate.getMonth() === now.getMonth() && expDate.getFullYear() === now.getFullYear();
                });

                const monthlySpent = thisMonth.reduce((sum, exp) => sum + exp.amount, 0);
                const budgetLeft = this.budget - monthlySpent;
                const predicted = this.predictNextMonthSpending();

                document.getElementById('monthlySpent').textContent = monthlySpent.toFixed(2);
                document.getElementById('budgetLeft').textContent = Math.max(0, budgetLeft).toFixed(2);
                document.getElementById('predictedSpend').textContent = predicted.toFixed(0);
            }

            renderTransactions() {
                const container = document.getElementById('transactionsList');
                const recent = this.expenses.slice(0, 5);
                
                container.innerHTML = recent.map(exp => `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                <span class="text-sm">${this.getCategoryIcon(exp.category)}</span>
                            </div>
                            <div>
                                <p class="font-medium text-gray-800">${exp.description}</p>
                                <p class="text-sm text-gray-500">${exp.category} ‚Ä¢ ${exp.date.toLocaleDateString()}</p>
                            </div>
                        </div>
                        <span class="font-semibold text-red-600">-$${exp.amount.toFixed(2)}</span>
                    </div>
                `).join('');
            }

            renderAlerts() {
                const container = document.getElementById('alertsList');
                const monthlySpent = this.expenses.filter(exp => {
                    const expDate = new Date(exp.date);
                    const now = new Date();
                    return expDate.getMonth() === now.getMonth() && expDate.getFullYear() === now.getFullYear();
                }).reduce((sum, exp) => sum + exp.amount, 0);

                const alerts = [];
                
                if (monthlySpent > this.budget * 0.8) {
                    alerts.push({
                        type: 'warning',
                        message: 'You\'ve spent 80% of your monthly budget',
                        icon: '‚ö†Ô∏è'
                    });
                }

                if (this.predictNextMonthSpending() > this.budget) {
                    alerts.push({
                        type: 'info',
                        message: 'AI predicts you may exceed budget next month',
                        icon: 'üîÆ'
                    });
                }

                alerts.push({
                    type: 'success',
                    message: 'Great job! You\'re on track with your savings goal',
                    icon: '‚úÖ'
                });

                container.innerHTML = alerts.map(alert => `
                    <div class="p-3 rounded-lg ${alert.type === 'warning' ? 'bg-yellow-50 border border-yellow-200' : 
                                                  alert.type === 'info' ? 'bg-blue-50 border border-blue-200' : 
                                                  'bg-green-50 border border-green-200'}">
                        <p class="text-sm flex items-center">
                            <span class="mr-2">${alert.icon}</span>
                            ${alert.message}
                        </p>
                    </div>
                `).join('');
            }

            getCategoryIcon(category) {
                const icons = {
                    'Food': 'üçï',
                    'Transportation': 'üöó',
                    'Entertainment': 'üé¨',
                    'Education': 'üìö',
                    'Shopping': 'üõçÔ∏è',
                    'Healthcare': 'üè•',
                    'Utilities': 'üí°',
                    'Other': 'üì¶'
                };
                return icons[category] || 'üì¶';
            }

            createCharts() {
                this.createSpendingChart();
                this.createCategoryChart();
            }

            createSpendingChart() {
                const ctx = document.getElementById('spendingChart').getContext('2d');
                const last6Months = [];
                const predicted = [];
                
                for (let i = 5; i >= 0; i--) {
                    const date = new Date();
                    date.setMonth(date.getMonth() - i);
                    last6Months.push(date.toLocaleDateString('en-US', { month: 'short' }));
                    predicted.push(Math.random() * 400 + 600); // Simulated data
                }
                
                predicted.push(this.predictNextMonthSpending());
                last6Months.push('Next');

                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: last6Months,
                        datasets: [{
                            label: 'Actual Spending',
                            data: predicted.slice(0, -1),
                            borderColor: '#3B82F6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'AI Prediction',
                            data: [null, null, null, null, null, predicted[5], predicted[6]],
                            borderColor: '#F59E0B',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            borderDash: [5, 5],
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            createCategoryChart() {
                const ctx = document.getElementById('categoryChart').getContext('2d');
                const categoryTotals = {};
                
                this.expenses.forEach(exp => {
                    categoryTotals[exp.category] = (categoryTotals[exp.category] || 0) + exp.amount;
                });

                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: Object.keys(categoryTotals),
                        datasets: [{
                            data: Object.values(categoryTotals),
                            backgroundColor: [
                                '#3B82F6', '#10B981', '#F59E0B', '#EF4444', 
                                '#8B5CF6', '#06B6D4', '#84CC16', '#F97316'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                            }
                        }
                    }
                });
            }

            updateCharts() {
                // Recreate charts with updated data
                Chart.getChart('spendingChart')?.destroy();
                Chart.getChart('categoryChart')?.destroy();
                this.createCharts();
            }

            showGoalModal() {
                document.getElementById('goalModal').classList.remove('hidden');
                document.getElementById('goalModal').classList.add('flex');
            }

            hideGoalModal() {
                document.getElementById('goalModal').classList.add('hidden');
                document.getElementById('goalModal').classList.remove('flex');
                document.getElementById('goalForm').reset();
            }

            addGoal(e) {
                e.preventDefault();
                const name = document.getElementById('goalName').value;
                const target = parseFloat(document.getElementById('goalAmount').value);
                
                this.goals.push({ name, current: 0, target });
                this.hideGoalModal();
                
                // Show success message
                alert(`Goal "${name}" added successfully! Start saving towards your $${target} target.`);
            }
        }

        // Initialize the AI Finance Manager
        document.addEventListener('DOMContentLoaded', () => {
            new AIFinanceManager();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e643b9f4279f41',t:'MTc1Nzc1MjAzNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
